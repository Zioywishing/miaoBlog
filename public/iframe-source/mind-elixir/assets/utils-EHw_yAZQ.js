function e(){let e,t=null,n=()=>{t&&(document.body.removeChild(t),t=null),window.removeEventListener(`focus`,r),e=void 0},r=()=>{setTimeout(()=>{t&&!t.files?.length&&e&&(e([]),n())},300)};return i=>(e&&(e([]),n()),new Promise(a=>{t=document.createElement(`input`),t.id=`__file_${Math.ceil(Math.random()*1e8)}`,t.type=`file`,t.style.display=`none`,document.body.appendChild(t),e=a,i?.accept&&(t.accept=i.accept),i?.multiple&&(t.multiple=i.multiple),t.addEventListener(`change`,()=>{if(!t||!t.files){a([]),n();return}let e=Array.from(t.files);a(e),n()},{once:!0}),window.addEventListener(`focus`,r,{once:!0}),t.click()}))}var t=class{fileHandle;constructor(e){this.fileHandle=e}isBusy=!1;nextData=null;write=async e=>{if(this.isBusy){this.nextData=e;return}for(this.isBusy=!0,this.nextData=this.nextData??e;this.nextData;){let e=this.nextData;this.nextData=null;let t=await this.fileHandle.createWritable();await t.write(e),await t.close()}this.isBusy=!1}};export{t as b,e as c};