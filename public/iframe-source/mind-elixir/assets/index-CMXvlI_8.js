import{b as e,c as t,d as n,e as r,f as i,h as a,i as o,j as s,k as c,l,m as u,n as d,o as f,q as p,s as m,t as h,u as g}from"./vendor-DGjZBOGL.js";import{b as _,c as v,d as y,e as b,f as x}from"./hooks-Cozyu7yy.js";import{b as S,c as C}from"./components-V0nUp5TL.js";import{b as w}from"./utils-EHw_yAZQ.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e){if(t.type!==`childList`)continue;for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();const T={class:`min-h-screen min-w-screen h-screen w-screen bg-gray-100 flex items-center justify-center relative`},E={key:0,class:`absolute top-0 left-0 right-0 bottom-0 bg-black bg-opacity-50 flex items-center justify-center`};var D=u({__name:`App`,setup(n){let i=h(),u=g(),D=_(u),O=g(``),k=g(),A=async e=>{console.log(`d`),k.value=new w(e),u.value?.refresh(JSON.parse(await e.getFile().then(e=>e.text()))),D.recordMindMapImage(),O.value=``},j=async()=>{O.value=`import`},M=async()=>{O.value=`save`},N=e=>{console.log(`c`),k.value=void 0,u.value?.refresh(e),O.value=``,D.recordMindMapImage()},P=()=>{let e=u.value?.getDataString();if(!e)return;let t=new File([e],`mindMap.json`,{type:`application/json`}),n=URL.createObjectURL(t),r=document.createElement(`a`);r.href=n,r.download=`mindMap.json`,r.click(),URL.revokeObjectURL(n)},F=()=>{if(!u.value)return;let e=u.value.exportSvg(),t=URL.createObjectURL(e),n=document.createElement(`a`);n.href=t,n.download=`mindMap.svg`,n.click(),URL.revokeObjectURL(t)},I=async()=>{if(!u.value)return;let e=await u.value.exportPng(),t=URL.createObjectURL(e),n=document.createElement(`a`);n.href=t,n.download=`mindMap.png`,n.click(),URL.revokeObjectURL(t)},L=()=>{O.value=``},R=e(async e=>{if(![`insertSibling`].includes(e.name)&&(D.recordMindMapImage(),k.value)){if(!u.value)return;k.value.write(u.value.getDataString())}},500);return f(async()=>{u.value=new t({el:i.value,direction:t.LEFT});let e=await D.getCurrentHistory()??t.new(`miaoSpring`);u.value?.init(e),u.value?.bus.addListener(`operation`,R),await d();let n=document.querySelector(`.mind-elixir-toolbar.rb`),r=document.createElement(`div`);r.classList.add(`mind-elixir-toolbar`,`rt`);let a=y(),o=x(),s=b(),c=v();a.addEventListener(`click`,()=>{D.redoHistory()}),o.addEventListener(`click`,()=>{D.undoHistory()}),s.addEventListener(`click`,M),c.addEventListener(`click`,j),r.appendChild(o),r.appendChild(a),r.appendChild(s),r.appendChild(c),n.parentNode.appendChild(r)}),(e,t)=>(p(),c(`main`,T,[a(`div`,{class:`mind-container h-full w-full`,ref_key:`mindContainerRef`,ref:i},null,512),l(r,{name:`fade`},{default:m(()=>[O.value?(p(),c(`div`,E,[O.value===`save`?(p(),o(C,{key:0,onClose:L,onSaveAsJson:P,onSaveAsSvg:F,onSaveAsPng:I})):s(``,!0),O.value===`import`?(p(),o(S,{key:1,onClose:L,onOnData:N,onOnFileHandle:A})):s(``,!0)])):s(``,!0)]),_:1})]))}}),O=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n},k=O(D,[[`__scopeId`,`data-v-9e2db77d`]]);const A=i(k);A.use(n()),A.mount(`#app`);